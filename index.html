<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resolution Tracker - AI-Powered Goal Achievement</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéØ</text></svg>">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Work+Sans:wght@300;400;500;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Work Sans', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1e293b 0%, #7c3aed 50%, #1e293b 100%);
            color: white;
            min-height: 100vh;
        }
        
        .title-font {
            font-family: 'Playfair Display', serif;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .header {
            text-align: center;
            margin-bottom: 4rem;
        }
        
        .header h1 {
            font-size: 4rem;
            font-weight: 900;
            background: linear-gradient(to right, #a855f7, #ec4899, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }
        
        .header p {
            font-size: 1.2rem;
            color: #c4b5fd;
            font-weight: 300;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 2rem;
        }
        
        .input-section {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .input-field {
            flex: 1;
            background: transparent;
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
            color: white;
            font-size: 1rem;
        }
        
        .input-field::placeholder {
            color: #c4b5fd;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #a855f7;
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1);
        }
        
        .btn {
            background: linear-gradient(to right, #a855f7, #ec4899);
            border: none;
            border-radius: 0.5rem;
            padding: 1rem 2rem;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(168, 85, 247, 0.3);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .goal-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }
        
        .goal-card:hover {
            border-color: rgba(168, 85, 247, 0.5);
            transform: translateY(-2px);
        }
        
        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }
        
        .goal-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .goal-category {
            font-size: 0.875rem;
            color: #c4b5fd;
            text-transform: capitalize;
        }
        
        .goal-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .icon-btn {
            background: none;
            border: none;
            color: #c4b5fd;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 0.25rem;
            transition: color 0.3s;
        }
        
        .icon-btn:hover {
            color: white;
        }
        
        .delete-btn:hover {
            color: #ef4444;
        }
        
        .progress-bar {
            width: 100%;
            height: 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0.375rem;
            overflow: hidden;
            margin-bottom: 1rem;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #10b981, #059669);
            border-radius: 0.375rem;
            transition: width 1s ease;
        }
        
        .ai-response {
            background: linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(236, 72, 153, 0.2));
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 1rem;
        }
        
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
        }
        
        .empty-state h3 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        
        .empty-state p {
            color: #c4b5fd;
            margin-bottom: 2rem;
        }
        
        .examples {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 1rem;
            padding: 1.5rem;
            text-align: left;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .examples ul {
            list-style: none;
            padding: 0;
        }
        
        .examples li {
            margin-bottom: 0.5rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .examples li:before {
            content: '‚Ä¢';
            color: #a855f7;
            margin-right: 0.5rem;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .goal-card {
            animation: slideIn 0.4s ease-out;
        }
        
        .loading {
            text-align: center;
            padding: 4rem;
            font-size: 1.2rem;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }
            .input-section {
                flex-direction: column;
            }
            .goal-header {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div style="font-size: 4rem; margin-bottom: 1rem;">‚ú®</div>
            <h1 class="title-font">Resolution Tracker</h1>
            <p>Your AI-powered companion for achieving greatness in 2026</p>
        </div>

        <!-- Input Section -->
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h3 style="margin: 0;">AI Coach</h3>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 0.875rem; color: #c4b5fd;">Coaching Style:</span>
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" id="brutalModeToggle" style="accent-color: #a855f7;">
                        <span style="font-size: 0.875rem; font-weight: 600;" id="modeLabel">üòä Supportive</span>
                    </label>
                </div>
            </div>
            <div class="input-section">
                <input 
                    type="text" 
                    class="input-field" 
                    id="goalInput"
                    placeholder="Tell me about a goal... 'I want to learn Spanish' or 'I ran 5k today!'"
                >
                <button class="btn" id="addGoalBtn">Add Goal</button>
            </div>
            
            <!-- AI Response -->
            <div id="aiResponse" class="ai-response" style="display: none;">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                    <span style="font-size: 1.2rem;">‚ú®</span>
                    <strong>AI Coach:</strong>
                </div>
                <p id="aiResponseText"></p>
            </div>
        </div>

        <!-- Goals List -->
        <div id="goalsList">
            <!-- Goals will be inserted here -->
        </div>

        <!-- Empty State -->
        <div id="emptyState" class="empty-state">
            <div style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;">üéØ</div>
            <h3 class="title-font">Ready to Start Your Journey?</h3>
            <p>Tell your AI coach about a goal you want to achieve this year. Be specific or casual - the AI understands both!</p>
            
            <div class="examples">
                <p style="color: #c4b5fd; font-size: 0.875rem; margin-bottom: 1rem;">Try examples like:</p>
                <ul>
                    <li>"I want to read 24 books this year"</li>
                    <li>"Learn to play guitar"</li>
                    <li>"Save $5000 for a vacation"</li>
                    <li>"Run a 5K without stopping"</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Simple storage using localStorage
        const storage = {
            get: (key) => {
                try {
                    const value = localStorage.getItem(key);
                    return value ? { value } : null;
                } catch (error) {
                    console.error('Storage get error:', error);
                    return null;
                }
            },
            set: (key, value) => {
                try {
                    localStorage.setItem(key, value);
                    return true;
                } catch (error) {
                    console.error('Storage set error:', error);
                    throw error;
                }
            }
        };

        // Global state
        let resolutions = [];
        let isProcessing = false;
        let brutalMode = false;

        // DOM elements
        const goalInput = document.getElementById('goalInput');
        const addGoalBtn = document.getElementById('addGoalBtn');
        const aiResponse = document.getElementById('aiResponse');
        const aiResponseText = document.getElementById('aiResponseText');
        const goalsList = document.getElementById('goalsList');
        const emptyState = document.getElementById('emptyState');
        const brutalModeToggle = document.getElementById('brutalModeToggle');
        const modeLabel = document.getElementById('modeLabel');

        // Category colors
        const categoryColors = {
            health: '#10b981',
            career: '#3b82f6',
            personal: '#8b5cf6',
            finance: '#f59e0b',
            learning: '#ec4899',
            relationships: '#ef4444'
        };

        // Load data on startup
        document.addEventListener('DOMContentLoaded', () => {
            loadResolutions();
            
            // Show demo notice
            if (!localStorage.getItem('demo-notice-shown')) {
                setTimeout(() => {
                    alert('üéØ DEMO MODE: This is a fully functional demo! Try adding goals like "I want to learn Spanish" or "I ran 5k today!"');
                    localStorage.setItem('demo-notice-shown', 'true');
                }, 1000);
            }
        });

        // Event listeners
        addGoalBtn.addEventListener('click', handleInput);
        goalInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                handleInput();
            }
        });
        
        brutalModeToggle.addEventListener('change', (e) => {
            brutalMode = e.target.checked;
            modeLabel.textContent = brutalMode ? 'üéØ Coach' : 'üòä Supportive';
            storage.set('brutal-mode', brutalMode.toString());
        });

        // Load resolutions from storage
        function loadResolutions() {
            try {
                const result = storage.get('resolutions-data');
                if (result?.value) {
                    resolutions = JSON.parse(result.value);
                }
                
                // Load brutal mode setting
                const brutalSetting = storage.get('brutal-mode');
                if (brutalSetting?.value) {
                    brutalMode = brutalSetting.value === 'true';
                    brutalModeToggle.checked = brutalMode;
                    modeLabel.textContent = brutalMode ? 'üéØ Coach' : 'üòä Supportive';
                }
                
                updateUI();
            } catch (error) {
                console.error('Failed to load resolutions:', error);
            }
        }

        // Save resolutions to storage
        function saveResolutions() {
            try {
                storage.set('resolutions-data', JSON.stringify(resolutions));
            } catch (error) {
                console.error('Failed to save resolutions:', error);
            }
        }

        // Handle user input
        async function handleInput() {
            const input = goalInput.value.trim();
            if (!input || isProcessing) return;

            goalInput.value = '';
            isProcessing = true;
            addGoalBtn.disabled = true;
            addGoalBtn.textContent = '...';

            try {
                // Simulate AI processing
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const lowerInput = input.toLowerCase();
                let response;

                if (lowerInput.includes('want') || lowerInput.includes('goal') || lowerInput.includes('resolution')) {
                    // Add new goal
                    const title = input.replace(/i want to |i want |goal:|resolution:/i, '').trim();
                    const category = detectCategory(lowerInput);
                    
                    const newGoal = {
                        id: Date.now().toString(),
                        title: title,
                        category: category,
                        progress: 0,
                        createdAt: new Date().toISOString(),
                        updates: [],
                        lastUpdate: new Date().toISOString()
                    };
                    
                    resolutions.push(newGoal);
                    saveResolutions();
                    
                    if (brutalMode) {
                        response = getBrutalGoalResponse(title, category, resolutions.length);
                    } else {
                        response = `Great goal! I've added "${title}" to your ${category} resolutions. Remember, every journey begins with a single step. What's your first action going to be?`;
                    }
                    
                } else if (lowerInput.includes('progress') || lowerInput.includes('did') || lowerInput.includes('completed') || lowerInput.includes('ran') || lowerInput.includes('studied') || lowerInput.includes('read')) {
                    // Update progress on most recent goal
                    if (resolutions.length > 0) {
                        const lastGoal = resolutions[resolutions.length - 1];
                        const daysSinceLastUpdate = Math.floor((new Date() - new Date(lastGoal.lastUpdate)) / (1000 * 60 * 60 * 24));
                        const progressIncrease = Math.floor(Math.random() * 15) + 5;
                        lastGoal.progress = Math.min(100, lastGoal.progress + progressIncrease);
                        lastGoal.lastUpdate = new Date().toISOString();
                        lastGoal.updates.push({
                            text: input,
                            date: new Date().toISOString(),
                            progressChange: progressIncrease
                        });
                        saveResolutions();
                        
                        if (brutalMode) {
                            response = getBrutalProgressResponse(lastGoal, progressIncrease, daysSinceLastUpdate, input);
                        } else {
                            response = `Fantastic progress on "${lastGoal.title}"! I've updated your progress by ${progressIncrease}%. Every step forward counts. Keep up the momentum!`;
                        }
                    } else {
                        if (brutalMode) {
                            response = "I see you're ready to track progress, but you need goals first. Here's my advice: start with ONE specific, measurable goal. What's the most important thing you want to achieve this month?";
                        } else {
                            response = "That sounds like great progress! Create your first goal so I can start tracking your achievements.";
                        }
                    }
                } else {
                    // General motivation
                    if (brutalMode) {
                        response = getBrutalMotivation(resolutions);
                    } else {
                        response = "I'm here to support your journey! Try telling me about a new goal you want to achieve with 'I want to...', or update me on your progress!";
                    }
                }

                showAIResponse(response);
                updateUI();

            } catch (error) {
                console.error('Error processing input:', error);
                showAIResponse("I had trouble processing that. This is a demo version - try creating a goal by saying 'I want to...' or updating progress!");
            } finally {
                isProcessing = false;
                addGoalBtn.disabled = false;
                addGoalBtn.textContent = 'Add Goal';
            }
        }

        // Detect category from input
        function detectCategory(input) {
            if (input.includes('health') || input.includes('fitness') || input.includes('exercise') || input.includes('run') || input.includes('gym')) return 'health';
            if (input.includes('work') || input.includes('career') || input.includes('job') || input.includes('business')) return 'career';
            if (input.includes('money') || input.includes('save') || input.includes('budget') || input.includes('invest')) return 'finance';
            if (input.includes('learn') || input.includes('study') || input.includes('book') || input.includes('course')) return 'learning';
            if (input.includes('relationship') || input.includes('family') || input.includes('friend') || input.includes('social')) return 'relationships';
            return 'personal';
        }

        // Best friend coaching functions
        function getBrutalGoalResponse(title, category, totalGoals) {
            if (totalGoals > 6) {
                return `Okay, real talk - "${title}" is goal #${totalGoals}. Dude, you're collecting goals like they're trading cards! Pick 3-4 that actually matter to you and ditch the rest. You can't chase everything and catch nothing.`;
            } else if (totalGoals > 4) {
                return `"${title}" - alright, that's ${totalGoals} goals now. Listen, I've seen you do this before. You're getting goal-happy. Focus on what you've got before adding more, yeah?`;
            } else if (totalGoals > 2) {
                return `"${title}" added! You've got ${totalGoals} goals going - that's actually a sweet spot. Now here's the thing: consistency beats intensity. Show up every day, even if it's just 10 minutes.`;
            } else {
                return `Love seeing "${title}" as a goal! This is good - ${category} is important. Break this down: what's ONE thing you can do this week? Don't overthink it, just start.`;
            }
        }

        function getBrutalProgressResponse(goal, progressIncrease, daysSinceLastUpdate, activity) {
            if (daysSinceLastUpdate > 10) {
                return `Whoa, hold up! +${progressIncrease}% on "${goal.title}" but it's been ${daysSinceLastUpdate} days?? Come on, we both know you can do better than that. What happened? Let's get back on track.`;
            } else if (daysSinceLastUpdate > 5) {
                return `Hey! +${progressIncrease}% is good but ${daysSinceLastUpdate} days between updates? That's how goals die, my friend. I'm not letting you give up on this. What's really going on?`;
            } else if (daysSinceLastUpdate > 2) {
                return `Solid ${progressIncrease}% progress on "${goal.title}"! Though ${daysSinceLastUpdate} days is getting a bit long. Keep the momentum - you know what works, just do it more often.`;
            } else if (goal.progress < 30) {
                return `Yes! +${progressIncrease}% on "${goal.title}"! You're at ${goal.progress}% now. Early days are tough but you're building the foundation. Don't stop when it gets hard - that's when it's working.`;
            } else if (goal.progress < 60) {
                return `Nice one! +${progressIncrease}% brings you to ${goal.progress}%. You're in that weird middle part where it feels slow but trust me - you're building real momentum here. Keep grinding.`;
            } else if (goal.progress < 90) {
                return `Boom! +${progressIncrease}% and you're at ${goal.progress}%! Dude, you're actually crushing this. Don't ease up now - this is where most people slack off. You're not most people.`;
            } else {
                return `YESSS! +${progressIncrease}% and you're at ${goal.progress}%! You're SO close I can taste it! Don't you dare stop now. Push through and finish this thing!`;
            }
        }

        function getBrutalMotivation(resolutions) {
            if (resolutions.length === 0) {
                return "Alright, we need to talk. You've got no goals set up? Come on, you're better than just drifting. Pick ONE thing you actually want and let's make it happen.";
            }
            
            const stagnantGoals = resolutions.filter(r => {
                const daysSinceUpdate = Math.floor((new Date() - new Date(r.lastUpdate)) / (1000 * 60 * 60 * 24));
                return daysSinceUpdate > 5;
            });
            
            const lowProgressGoals = resolutions.filter(r => r.progress < 20);
            const highProgressGoals = resolutions.filter(r => r.progress >= 60);
            const completedGoals = resolutions.filter(r => r.progress >= 100);
            
            if (completedGoals.length > 0) {
                return `Yo! You've actually FINISHED ${completedGoals.length} goals! See? You CAN do this. That's proof you're not just a dreamer - you're a doer. What's next?`;
            } else if (stagnantGoals.length > resolutions.length / 2) {
                return `Look, I'm gonna be straight with you - ${stagnantGoals.length} of your goals are gathering dust. Either care about them or delete them. Half-hearted doesn't work.`;
            } else if (lowProgressGoals.length > 0 && highProgressGoals.length > 0) {
                return `Mixed bag here - you're crushing some goals but others are stuck at the starting line. Focus your energy. What's your #1 priority right now?`;
            } else if (lowProgressGoals.length > 0) {
                return `Real talk: you've got ${lowProgressGoals.length} goals barely started. Stop spreading yourself thin. Pick ONE and commit to 15 minutes daily. That's it.`;
            } else if (highProgressGoals.length > 0) {
                return `Dude, you're actually doing great! ${highProgressGoals.length} goals past 60% - that's legit progress. Don't let up now, you're on fire!`;
            } else {
                return "You're making steady progress but I know you can do better. Pick your favorite goal and double down this week. Show me what you're really capable of.";
            }
        }

        // Show AI response
        function showAIResponse(message) {
            aiResponseText.textContent = message;
            
            // Change styling based on mode
            if (brutalMode) {
                aiResponse.style.background = 'linear-gradient(to right, rgba(59, 130, 246, 0.2), rgba(16, 185, 129, 0.2))';
                aiResponse.style.borderColor = 'rgba(59, 130, 246, 0.3)';
            } else {
                aiResponse.style.background = 'linear-gradient(to right, rgba(168, 85, 247, 0.2), rgba(236, 72, 153, 0.2))';
                aiResponse.style.borderColor = 'rgba(168, 85, 247, 0.3)';
            }
            
            aiResponse.style.display = 'block';
            setTimeout(() => {
                aiResponse.style.display = 'none';
            }, 7000); // Show longer for brutal feedback to sink in
        }

        // Update UI
        function updateUI() {
            if (resolutions.length === 0) {
                goalsList.style.display = 'none';
                emptyState.style.display = 'block';
            } else {
                goalsList.style.display = 'block';
                emptyState.style.display = 'none';
                renderGoals();
            }
        }

        // Render goals
        function renderGoals() {
            goalsList.innerHTML = `
                <div class="card">
                    <h2 class="title-font" style="font-size: 2rem; margin-bottom: 1.5rem;">Your Resolutions</h2>
                    ${resolutions.map((goal, index) => `
                        <div class="goal-card" style="animation-delay: ${index * 0.1}s">
                            <div class="goal-header">
                                <div>
                                    <div class="goal-title">${goal.title}</div>
                                    <div class="goal-category">${goal.category}</div>
                                </div>
                                <div class="goal-actions">
                                    <button class="icon-btn delete-btn" onclick="deleteGoal('${goal.id}')">üóëÔ∏è</button>
                                </div>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.875rem; color: #c4b5fd;">${getProgressMessage(goal.progress)}</span>
                                <span style="font-weight: 600; color: ${categoryColors[goal.category]};">${goal.progress}%</span>
                            </div>
                            
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${goal.progress}%; background: linear-gradient(to right, ${categoryColors[goal.category]}, ${categoryColors[goal.category]}dd);"></div>
                            </div>
                            
                            ${goal.updates.length > 0 ? `
                                <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
                                    <p style="font-size: 0.75rem; color: #c4b5fd; margin-bottom: 0.5rem;">Latest Update:</p>
                                    <p style="font-size: 0.875rem; color: rgba(255,255,255,0.8);">${goal.updates[goal.updates.length - 1].text}</p>
                                    <p style="font-size: 0.75rem; color: #c4b5fd; margin-top: 0.5rem;">${new Date(goal.updates[goal.updates.length - 1].date).toLocaleDateString()}</p>
                                </div>
                            ` : ''}
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Get progress message
        function getProgressMessage(progress) {
            if (progress < 20) return "Just getting started";
            if (progress < 40) return "Building momentum";
            if (progress < 60) return "Making solid progress";
            if (progress < 80) return "Getting close!";
            return "Almost there!";
        }

        // Delete goal
        function deleteGoal(id) {
            if (confirm('Are you sure you want to delete this resolution?')) {
                resolutions = resolutions.filter(r => r.id !== id);
                saveResolutions();
                updateUI();
            }
        }
    </script>
</body>
</html>